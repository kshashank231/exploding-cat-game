(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{15:function(e,t,c){},21:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c(5),a=c.n(s),r=(c(15),c(4)),i=(c(9),c(0));function o(e){var t=e.cardData,c=function(){return t.isSelected?Object(i.jsxs)("div",{className:"card-description",children:[Object(i.jsx)("div",{className:"card-description-item",children:Object(i.jsx)("img",{src:t.src})}),Object(i.jsx)("div",{className:"card-description-item",children:Object(i.jsx)("p",{children:t.description})})]}):Object(i.jsx)("div",{className:"flip-button",onClick:e.handleCardSelected,children:Object(i.jsx)("div",{})})};return Object(i.jsx)("div",{className:"card ".concat(t.isSelected?"selected-card":""),children:Object(i.jsx)("div",{className:"card-content",children:Object(i.jsx)(c,{})})})}var l=c(2),d=c(3),j=c(10),u={baseUrl:"https://explodingcatgame-api.herokuapp.com/"},h=Object(j.a)({},u),b=Object(d.b)({name:"game",initialState:{defuse:!1,gameStatus:"inprogress",leaderBoard:[]},reducers:{setDefuse:function(e,t){console.log("setDefuse",e,t.payload),e.defuse=t.payload},setStatus:function(e,t){console.log("setDefuse",e,t.payload),e.gameStatus=t.payload},updateLeaderBoard:function(e,t){console.log("updateLeaderBoard",e,t.payload),e.leaderBoard=t.payload}}}),m=b.actions,f=m.setStatus,g=m.setDefuse,O=m.updateLeaderBoard,p=b.reducer,x=Object(d.b)({name:"auth",initialState:{userDetails:{userName:"",userId:"",score:0},loggedIn:!1},reducers:{setUserDetails:function(e,t){console.log("setUserDetails",e,t.payload),e.userDetails=t.payload,e.loggedIn=!0},updateScore:function(e,t){console.log("setUserDetails",e,t.payload),e.userDetails.score=parseInt(e.userDetails.score,10)+1},logoff:function(e,t){console.log("setUserDetails",e,t.payload),e.loggedIn=!1}}}),v=x.actions,N=v.setUserDetails,S=v.updateScore,y=v.logoff,D=function(e){return function(t,c){fetch(h.baseUrl+"update",{method:"POST",body:JSON.stringify({userName:e.userName,score:parseInt(e.score,10)+1}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){console.log(e);var c={userName:e.title,userId:e.userId,score:e.score};t(S(c))}))}},k=x.reducer;function C(){var e=Object(n.useState)([]),t=Object(r.a)(e,2),c=t[0],s=t[1],a=Object(l.c)((function(e){return e.game.defuse})),d=Object(l.c)((function(e){return e.game.gameStatus})),j=Object(l.c)((function(e){return e.auth.userDetails})),u=Object(l.b)();function h(){console.log("cardSelected");var e=c.length-1;s((function(t){var c=JSON.parse(JSON.stringify(t));return c[e].isSelected=!0,console.log("newItems",c),console.log("state, canDefuse",a,", gameStatus",d),c})),setTimeout((function(){var t=JSON.parse(JSON.stringify(c));switch(console.log("newItems",t),t[e].id){case 1:0===(t=t.filter((function(t,c){return e!==c}))).length&&(u(f("won")),u(D(j)));break;case 2:t=t.filter((function(t,c){return e!==c})),u(g(!0));break;case 3:1===t.length?(u(f("won")),u(D(j))):(t=[{id:1,description:"Cat",src:"https://img.icons8.com/nolan/64/cat.png"},{id:2,description:"Defuse",src:"https://img.icons8.com/external-justicon-flat-justicon/64/000000/external-jacket-autumn-clothes-justicon-flat-justicon-2.png"},{id:3,description:"Shuffle",src:"https://img.icons8.com/cute-clipart/64/000000/shuffle.png"},{id:4,description:"Exploding kitten",src:"https://img.icons8.com/emoji/96/000000/bomb-emoji.png"}],u(g(!1)),t=function(e){for(var t,c=e.length;0!==c;){t=Math.floor(Math.random()*c),c--;var n=[e[t],e[c]];e[c]=n[0],e[t]=n[1]}return e}(t));break;case 4:a?(t=t.filter((function(t,c){return e!==c})),u(g(!1))):u(f("gameover"))}s(t),console.log("timeout state, canDefuse",a,", gameStatus",d)}),2e3)}Object(n.useEffect)((function(){for(var e,t=[{id:1,description:"Cat",src:"https://img.icons8.com/nolan/64/cat.png"},{id:2,description:"Defuse",src:"https://img.icons8.com/external-justicon-flat-justicon/64/000000/external-jacket-autumn-clothes-justicon-flat-justicon-2.png"},{id:3,description:"Shuffle",src:"https://img.icons8.com/cute-clipart/64/000000/shuffle.png"},{id:4,description:"Exploding kitten",src:"https://img.icons8.com/emoji/96/000000/bomb-emoji.png"}],c=t.length;0!==c;){e=Math.floor(Math.random()*c),c--;var n=[t[e],t[c]];t[c]=n[0],t[e]=n[1]}console.log(t),s(t)}),[]);var b=function(){switch(d){case"inprogress":return Object(i.jsx)("div",{className:"container",children:c.map((function(e,t){return Object(i.jsx)(o,{cardData:e,handleCardSelected:h},t)}))});case"won":return Object(i.jsx)("div",{children:Object(i.jsx)("h1",{children:"Won"})});case"gameover":return Object(i.jsx)("div",{children:Object(i.jsx)("h1",{children:"Lost"})})}};return Object(i.jsx)(b,{})}function I(){var e=Object(l.c)((function(e){return e.auth.userDetails})),t=Object(l.c)((function(e){return e.game.defuse}));return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{className:"game-info",children:Object(i.jsxs)("div",{children:["Defuse: ",t?"1":"0"]})}),Object(i.jsxs)("div",{className:"user-info",children:[Object(i.jsxs)("div",{children:["SCORE: ",e.score]}),Object(i.jsx)("div",{className:"vr"}),Object(i.jsx)("div",{className:"title-text",children:Object(i.jsx)("span",{className:"user-name",children:e.userName})})]})]})}function B(e){var t=e.data;return Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{className:"dialog-overlay"}),Object(i.jsx)("div",{className:"dialog-content",children:Object(i.jsxs)("div",{className:"dialog-form",children:[Object(i.jsx)("span",{className:"dialog-title",children:t.title}),Object(i.jsx)("span",{className:"dialog-desc",children:t.desc}),Object(i.jsx)("button",{onClick:t.handleBtn1,children:t.btn1}),Object(i.jsx)("button",{onClick:t.handleBtn2,children:t.btn2})]})})]})}function E(){var e=Object(l.b)(),t=(Object(l.c)((function(e){return e.game.gameStatus})),Object(l.c)((function(e){return e.game.leaderBoard}))),c=Object(n.useState)(!0),s=Object(r.a)(c,2),a=s[0],o=s[1];return Object(i.jsxs)("div",{className:"game-leaderboard",children:[a&&Object(i.jsx)("button",{onClick:function(){o(!1),setInterval((function(){e((function(e,t){fetch(h.baseUrl+"getLeaderBoard").then((function(e){return e.json()})).then((function(t){console.log(t),e(O(t.data))}))}))}),3e3)},children:"Get Live leaderboard"}),Object(i.jsx)("div",{className:"title-text",children:"LEADER BOARD"}),Object(i.jsx)("div",{className:"hr"}),t.length>0&&Object(i.jsxs)("div",{className:"leaderboard-header",children:[Object(i.jsx)("div",{children:"User Name"}),Object(i.jsx)("div",{children:"Score"})]}),t.map((function(e,t){return Object(i.jsxs)("div",{className:"leaderboard-content",children:[Object(i.jsx)("div",{children:e.userName}),Object(i.jsx)("div",{children:e.score})]},t)}))]})}function U(){var e=Object(l.c)((function(e){return e.game.gameStatus})),t=Object(l.b)(),c=function(){console.log("retry"),t(f("inprogress"))},n=function(){console.log("goHome"),t(f("inprogress")),t(y(!0))},s={title:"GAME OVER",btn1:"Try Again",btn2:"Home",handleBtn1:c,handleBtn2:n},a={title:"WON!",btn1:"Play Again",btn2:"Home",handleBtn1:c,handleBtn2:n};return Object(i.jsxs)(i.Fragment,{children:["gameover"===e&&Object(i.jsx)(B,{data:s}),"won"===e&&Object(i.jsx)(B,{data:a}),"inprogress"===e&&Object(i.jsxs)("div",{className:"game-content",children:[Object(i.jsx)("div",{className:"game-header",children:" Exploding Cat Game"}),Object(i.jsxs)("div",{className:"game-description",children:[Object(i.jsx)("span",{className:"title-text",children:"GAME RULES:"}),Object(i.jsx)("div",{className:"hr"}),Object(i.jsxs)("ul",{children:[Object(i.jsx)("li",{children:"Select a card from Deck by clicking on the Deck."}),Object(i.jsx)("li",{children:"If the card drawn from the deck is a cat card, then the card is removed from the deck."}),Object(i.jsx)("li",{children:"If the card is exploding kitten (bomb) then the player loses the game."}),Object(i.jsx)("li",{children:"If the card is defusing card, then the card is removed from the deck. This card can be used to defuse one bomb that may come in subsequent cards drawn from the deck."}),Object(i.jsx)("li",{children:"If the card is a shuffle card, then the game is restarted and the deck is filled with 5 cards again."})]})]}),Object(i.jsxs)("div",{className:"game-area",children:[Object(i.jsx)("div",{className:"play-header",children:Object(i.jsx)(I,{})}),Object(i.jsxs)("div",{className:"play-area",children:[Object(i.jsx)(C,{}),Object(i.jsx)(E,{})]})]})]})]})}function w(){var e=Object(n.useState)(""),t=Object(r.a)(e,2),c=t[0],s=t[1],a=Object(l.b)();return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{className:"home-game-header",children:" Exploding Cat Game"}),Object(i.jsxs)("div",{className:"home",children:[Object(i.jsx)("div",{className:"home-overlay"}),Object(i.jsxs)("div",{className:"home-content",children:[Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsxs)("label",{children:[Object(i.jsx)("span",{children:"Username"}),Object(i.jsx)("input",{type:"text",value:c,onChange:function(e){s(e.target.value)},placeholder:"Enter User Name"})]}),Object(i.jsx)("button",{onClick:function(){var e;(console.log("sdf",c),c)&&a((e=c,function(t,c){fetch(h.baseUrl+"signin",{method:"POST",body:JSON.stringify({userName:e}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){console.log(e);var c={userName:e.userName,userId:e.userId,score:e.score};t(N(c))}))}))},children:"Start Game"})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{onClick:function(){console.log("env","production")},children:"CALL SERVICE"})})]})]})]})}var L=function(){var e=Object(l.c)((function(e){return e.auth.loggedIn}));return Object(i.jsxs)(i.Fragment,{children:[!e&&Object(i.jsx)(w,{}),e&&Object(i.jsx)(U,{})]})},F=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,22)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;c(e),n(e),s(e),a(e),r(e)}))},T=Object(d.a)({reducer:{game:p,auth:k}});a.a.render(Object(i.jsx)(l.a,{store:T,children:Object(i.jsx)(L,{})}),document.getElementById("root")),F()},9:function(e,t,c){}},[[21,1,2]]]);
//# sourceMappingURL=main.5b0f648c.chunk.js.map